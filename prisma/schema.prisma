generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model User {
  id          String      @id @default(uuid())
  name        String
  email       String      @unique
  password    String
  is_active   Boolean     @default(true) @map("is_active")
  created_at  DateTime    @default(now()) @map("created_at")
  updated_at  DateTime    @updatedAt @map("updated_at")
  services    Service[]
  action_logs ActionLog[]

  @@map("users")
}

model Service {
  id                 String   @id @default(uuid())
  title              String
  slug               String
  short_description  String   @map("short_description")
  long_description   String   @db.Text @map("long_description")
  whats_included     Json     @map("whats_included")
  whats_not_included Json     @map("whats_not_included")
  typical_duration   String   @map("typical_duration")
  price_from         String   @map("price_from")
  image_url          String?  @map("image_url")
  is_published       Boolean  @default(false) @map("is_published")
  sort_order         Int      @default(0) @map("sort_order")
  user_id            String   @map("user_id")
  created_at         DateTime @default(now()) @map("created_at")
  updated_at         DateTime @updatedAt @map("updated_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([slug])
  @@index([user_id])
  @@map("services")
}

model ActionLog {
  id          String   @id @default(uuid())
  user_id     String   @map("user_id")
  action      String
  entity_type String?  @map("entity_type")
  entity_id   String?  @map("entity_id")
  details     String?  @db.Text
  created_at  DateTime @default(now()) @map("created_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([created_at])
  @@index([action])
  @@map("action_logs")
}

model Faq {
  id          String   @id @default(uuid())
  question    String   @db.Text
  answer      String   @db.Text
  category    String   @map("category")
  is_published Boolean @default(false) @map("is_published")
  sort_order  Int      @default(0) @map("sort_order")
  created_at  DateTime @default(now()) @map("created_at")
  updated_at  DateTime @updatedAt @map("updated_at")

  @@index([category])
  @@index([is_published])
  @@map("faqs")
}

model Settings {
  id                    String   @id @default("default")
  primary_phone         String?  @map("primary_phone")
  primary_email         String?  @map("primary_email")
  office_hours_text     String?  @db.Text @map("office_hours_text")
  service_area_text     String?  @db.Text @map("service_area_text")
  service_area_postcodes Json?   @map("service_area_postcodes")
  hero_badge_text       String?  @map("hero_badge_text")
  hero_headline         String?  @db.Text @map("hero_headline")
  hero_headline_highlight String? @map("hero_headline_highlight")
  hero_subtext          String?  @db.Text @map("hero_subtext")
  hero_images           Json?    @map("hero_images")
  social_facebook       String?  @map("social_facebook")
  social_instagram      String?  @map("social_instagram")
  social_twitter        String?  @map("social_twitter")
  social_linkedin       String?  @map("social_linkedin")
  logo_url              String?  @map("logo_url")
  favicon_url           String?  @map("favicon_url")
  updated_at            DateTime @updatedAt @map("updated_at")

  @@map("settings")
}

model Inquiry {
  id                         String    @id
  requester_type              String    @map("requester_type")
  full_name                   String    @map("full_name")
  email                      String    @map("email")
  phone                      String    @map("phone")
  preferred_contact_method   String    @map("preferred_contact_method")
  address_line               String    @map("address_line")
  postcode                   String    @map("postcode")
  service_type               Json      @map("service_type")
  property_type              String    @map("property_type")
  bedrooms                   Int       @map("bedrooms")
  bathrooms                  Int       @map("bathrooms")
  preferred_start_date       String?   @map("preferred_start_date")
  frequency                  String    @map("frequency")
  cleaning_scope_notes       String    @db.Text @map("cleaning_scope_notes")
  access_needs_or_preferences String?  @db.Text @map("access_needs_or_preferences")
  consent_to_contact        Boolean   @map("consent_to_contact")
  consent_data_processing   Boolean   @map("consent_data_processing")
  status                     String    @default("new") @map("status")
  internal_notes             Json      @default("[]") @map("internal_notes")
  created_at                 DateTime  @default(now()) @map("created_at")
  updated_at                 DateTime  @updatedAt @map("updated_at")

  @@index([status])
  @@index([created_at])
  @@map("inquiries")
}

model Application {
  id                                String   @id
  full_name                         String   @map("full_name")
  email                             String   @map("email")
  phone                             String   @map("phone")
  location_postcode                  String   @map("location_postcode")
  role_type                         Json     @map("role_type")
  availability                      Json     @map("availability")
  experience_summary                 String   @db.Text @map("experience_summary")
  right_to_work_uk                   Boolean  @map("right_to_work_uk")
  dbs_status                        String   @map("dbs_status")
  references_contact_details         String   @db.Text @map("references_contact_details")
  cv_file_url                       String   @map("cv_file_url")
  id_file_url                       String?  @map("id_file_url")
  consent_recruitment_data_processing Boolean @map("consent_recruitment_data_processing")
  status                            String   @default("new") @map("status")
  internal_notes                     Json     @default("[]") @map("internal_notes")
  created_at                        DateTime @default(now()) @map("created_at")
  updated_at                        DateTime @updatedAt @map("updated_at")

  @@index([status])
  @@index([created_at])
  @@map("applications")
}

model Testimonial {
  id             String   @id @default(uuid())
  name_public    String   @map("name_public")
  location_public String  @map("location_public")
  rating         Int      @map("rating")
  text          String   @db.Text @map("text")
  status        String   @default("pending") @map("status")
  is_published  Boolean  @default(false) @map("is_published")
  created_at    DateTime @default(now()) @map("created_at")
  updated_at    DateTime @updatedAt @map("updated_at")

  @@index([status])
  @@index([is_published])
  @@index([created_at])
  @@map("testimonials")
}
