generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model User {
  id          String      @id @default(uuid())
  name        String
  email       String      @unique
  password    String
  is_active   Boolean     @default(true) @map("is_active")
  created_at  DateTime    @default(now()) @map("created_at")
  updated_at  DateTime    @updatedAt @map("updated_at")
  services    Service[]
  action_logs ActionLog[]

  @@map("users")
}

model Service {
  id                 String   @id @default(uuid())
  title              String
  slug               String
  short_description  String   @map("short_description")
  long_description   String   @db.Text @map("long_description")
  whats_included     Json     @map("whats_included")
  whats_not_included Json     @map("whats_not_included")
  typical_duration   String   @map("typical_duration")
  price_from         String   @map("price_from")
  image_url          String?  @map("image_url")
  is_published       Boolean  @default(false) @map("is_published")
  sort_order         Int      @default(0) @map("sort_order")
  user_id            String   @map("user_id")
  created_at         DateTime @default(now()) @map("created_at")
  updated_at         DateTime @updatedAt @map("updated_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([slug])
  @@index([user_id])
  @@map("services")
}

model ActionLog {
  id          String   @id @default(uuid())
  user_id     String   @map("user_id")
  action      String
  entity_type String?  @map("entity_type")
  entity_id   String?  @map("entity_id")
  details     String?  @db.Text
  created_at  DateTime @default(now()) @map("created_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([created_at])
  @@index([action])
  @@map("action_logs")
}

model Faq {
  id          String   @id @default(uuid())
  question    String   @db.Text
  answer      String   @db.Text
  category    String   @map("category")
  is_published Boolean @default(false) @map("is_published")
  sort_order  Int      @default(0) @map("sort_order")
  created_at  DateTime @default(now()) @map("created_at")
  updated_at  DateTime @updatedAt @map("updated_at")

  @@index([category])
  @@index([is_published])
  @@map("faqs")
}
