generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model User {
  id          String      @id @default(uuid())
  name        String
  email       String      @unique
  password    String
  is_active   Boolean     @default(true) @map("is_active")
  created_at  DateTime    @default(now()) @map("created_at")
  updated_at  DateTime    @updatedAt @map("updated_at")
  services    Service[]
  action_logs ActionLog[]

  @@map("users")
}

model Service {
  id                 String   @id @default(uuid())
  title              String
  slug               String
  short_description  String   @map("short_description")
  long_description   String   @db.Text @map("long_description")
  whats_included     Json     @map("whats_included")
  whats_not_included Json     @map("whats_not_included")
  typical_duration   String   @map("typical_duration")
  price_from         String   @map("price_from")
  image_url          String?  @map("image_url")
  is_published       Boolean  @default(false) @map("is_published")
  sort_order         Int      @default(0) @map("sort_order")
  user_id            String   @map("user_id")
  created_at         DateTime @default(now()) @map("created_at")
  updated_at         DateTime @updatedAt @map("updated_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([slug])
  @@index([user_id])
  @@map("services")
}

model ActionLog {
  id          String   @id @default(uuid())
  user_id     String   @map("user_id")
  action      String
  entity_type String?  @map("entity_type")
  entity_id   String?  @map("entity_id")
  details     String?  @db.Text
  created_at  DateTime @default(now()) @map("created_at")

  user User @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([created_at])
  @@index([action])
  @@map("action_logs")
}

model Faq {
  id          String   @id @default(uuid())
  question    String   @db.Text
  answer      String   @db.Text
  category    String   @map("category")
  is_published Boolean @default(false) @map("is_published")
  sort_order  Int      @default(0) @map("sort_order")
  created_at  DateTime @default(now()) @map("created_at")
  updated_at  DateTime @updatedAt @map("updated_at")

  @@index([category])
  @@index([is_published])
  @@map("faqs")
}

model Settings {
  id                    String   @id @default("default")
  primary_phone         String?  @map("primary_phone")
  primary_email         String?  @map("primary_email")
  office_hours_text     String?  @db.Text @map("office_hours_text")
  service_area_text     String?  @db.Text @map("service_area_text")
  service_area_postcodes Json?   @map("service_area_postcodes")
  hero_badge_text       String?  @map("hero_badge_text")
  hero_headline         String?  @db.Text @map("hero_headline")
  hero_headline_highlight String? @map("hero_headline_highlight")
  hero_subtext          String?  @db.Text @map("hero_subtext")
  hero_images           Json?    @map("hero_images")
  social_facebook       String?  @map("social_facebook")
  social_instagram      String?  @map("social_instagram")
  social_twitter        String?  @map("social_twitter")
  social_linkedin       String?  @map("social_linkedin")
  logo_url              String?  @map("logo_url")
  favicon_url           String?  @map("favicon_url")
  updated_at            DateTime @updatedAt @map("updated_at")

  @@map("settings")
}
